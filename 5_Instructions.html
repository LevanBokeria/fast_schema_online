<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0">
    <title>Instructions</title>	
	<script src="jspsych-6.3.1/jspsych.js" ></script>
	<script src='./jspsych-6.3.1/plugins/jspsych-instructions.js'></script>
	<script src='./jspsych-6.3.1/plugins/jspsych-html-slider-response.js'></script>
	<script src='./jspsych-6.3.1/plugins/jspsych-survey-multi-choice.js'></script>
	<script src="jatos.js"></script>
	<link rel="stylesheet" href="jspsych-6.3.1/css/jspsych.css" type="text/css"></link>
	<link rel="stylesheet" href="./extra_files/schema_online.css" type="text/css"></link>	
  </head>

  <body>
  <script>

	//start timeline
	jatos.onLoad(function() {

		//make a timeline
		let timeline =[];			 

		// Define pages for phase 1
		let instruction_pages = [			
			'<div class= "header">'+
				'<h1> Instructions </h1>'+
			'</div>'+	
			'<div class="instruct">'+
				'<p>Welcome to the experiment!</p>' + 
				'<p>You will learn locations of pictures on 5 different boards. </p>' +
				'<p>On each board, there are 12 pictures, some visible and some hidden. You have to learn the location of the hidden pictures </p>' +
				'<p>On each trial, you will first see the board along with visible pictures. Then the board will disappear, and you will be told which of the 6 hidden pictures to find. You will then have to indicate the location of this hidden picture on an empty board. You will receive feedback on whether you were correct or not. During feedback, the previously visible pictures will show up as well! </p>' + 
				'<p>You will have 3 seconds on each trial!</p>' +
				'<p><br>Click next to do a few practice trials.</p>' +
			'</div>',												
		];

		let instructions = {
			type: 'instructions',
			pages : instruction_pages,						
			show_clickable_nav: true,
			button_label_next: '<span style="color: black"d;> <strong> Next </stong></span>',
		};		

		timeline.push(instructions);


		jsPsych.init({
			timeline: timeline,

			on_finish: function(data){

				// Make JATOS remember that this session was run
				jatos.studySessionData.latestFinishedComponentId    = jatos.componentId;
				jatos.studySessionData.latestFinishedComponentPos   = jatos.componentPos;
				jatos.studySessionData.latestFinishedComponentTitle = jatos.componentProperties.title;
				// debugger
				// Record results
				jatos.studySessionData.outputData.instructions_results = jsPsych.data.get().values()[0];

				let comp_to_start = jatos.studySessionData.inputData.component_positions.session_pa2

				jatos.submitResultData('[instructions_start---' + 
				JSON.stringify(jatos.studySessionData) +
				'---instructions_end]', 
				function(){jatos.startComponentByPos(comp_to_start)});

			}
		})


	});


	</script>
</body>
</html>