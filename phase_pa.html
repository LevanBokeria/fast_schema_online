<!DOCTYPE html>
<html>
    <head>
        <title>Playground</title>
        <script src='jatos.js'></script>
        <script src='./jspsych-6.3.1/jspsych.js'></script>        
        <script src='./extra_functions/lodash.js'></script>
        <script src='./extra_functions/jspsych-playground.js'></script>
        <script src = './extra_functions/jquery-3.4.1.js' type='text/javascript'></script>
        <script src="./jspsych-6.3.1/plugins/jspsych-vsl-grid-scene.js"></script>
        <script src="./jspsych-6.3.1/plugins/jspsych-serial-reaction-time-mouse.js"></script>
        <script src="./extra_functions/board_creator.js"></script>
        <link href='./jspsych-6.3.1/css/jspsych.css' rel='stylesheet' type='text/css'></link>
        <link href='./extra_files/schema_online.css' rel='stylesheet' type='text/css'></link>
    </head>
    <body></body>
    <script>

        jatos.onLoad(function() {

            // Define all the conditions here ///////////////////////////////////////////////////////////

            // Add the cells
            jatos.studySessionData.inputData.n_rows = 12
            jatos.studySessionData.inputData.n_cols = 12

            // Define all the possible colors. Later, map these by randomization or latin square
            jatos.studySessionData.inputData.condition_colors = {
                consistent_schema: 'red',
                inconsistent_schema: 'blue',
                stable_landmark: 'green',
                no_schema: 'gray',
                raw_learning: 'yellow',
            }

            jatos.studySessionData.inputData.condition_coords = {
                consistent_schema: [[1,1],
                                    [5,5],
                                    [7,7]],
                inconsistent_schema: [[1,1],
                                      [5,5],
                                      [7,7]],
                stable_landmark: [[1,1],
                                  [5,5],
                                  [7,7]],
                no_schema: [[1,1],
                            [5,5],
                            [7,7]],
                raw_learning: [[1,1],
                               [5,5],
                               [7,7]],
            }

            var images = [
                'img/targets/BOSS/downsized/8ball.jpg',
                'img/targets/BOSS/downsized/accordion01.jpg',
                'img/targets/BOSS/downsized/aceofdiamond.jpg',
                'img/targets/BOSS/downsized/acorn.jpg',
                'img/targets/BOSS/downsized/acousticguitar02.jpg',
                'img/targets/BOSS/downsized/addressplate.jpg',
                'img/targets/BOSS/downsized/africanelephant.jpg',
                'img/targets/BOSS/downsized/aloe01.jpg',
                'img/targets/BOSS/downsized/americangoldfinch.jpg',
                'img/targets/BOSS/downsized/anchor.jpg',
                'img/targets/BOSS/downsized/ant.jpg',
                'img/targets/BOSS/downsized/armchair02.jpg',
                'img/targets/BOSS/downsized/artichoke01b.jpg',
                'img/targets/BOSS/downsized/badmintonracket.jpg',
                'img/targets/BOSS/downsized/ballofstring.jpg',
                'img/targets/BOSS/downsized/barrel01.jpg',
                'img/targets/BOSS/downsized/bassethound.jpg',
                'img/targets/BOSS/downsized/battleaxe.jpg',
                'img/targets/BOSS/downsized/beachumbrella01.jpg',
                'img/targets/BOSS/downsized/bed.jpg',
                'img/targets/BOSS/downsized/bicycle.jpg',
                'img/targets/BOSS/downsized/birdnest.jpg',
                'img/targets/BOSS/downsized/bolt01a.jpg',
                'img/targets/BOSS/downsized/bottleofwhitewine.jpg',
                'img/targets/BOSS/downsized/bowlingpin.jpg',
                'img/targets/BOSS/downsized/bowtie.jpg',
            ]


            var session_procedure = {
                timeline: [
                    {   
                        type: 'playground',
                        prompt_question: 'Where is this item located?',
                        stimulus: jsPsych.timelineVariable('img_path'),
                        stimulus_idx: jsPsych.timelineVariable('stimulus_idx'),
                        stimulus_width: '50px',
                        condition: jsPsych.timelineVariable('condition'),
                    }
                ],
                timeline_variables: [
                    { img_path: 'img/targets/BOSS/downsized/8ball.jpg', stimulus_idx: 1, condition: 'consistent_schema'},
                    { img_path: 'img/targets/BOSS/downsized/aceofdiamond.jpg', stimulus_idx: 1, condition: 'consistent_schema'},
                    { img_path: 'img/targets/BOSS/downsized/acorn.jpg', stimulus_idx: 1, condition: 'consistent_schema'},
                    { img_path: 'img/targets/BOSS/downsized/8ball.jpg', stimulus_idx: 1, condition: 'consistent_schema'},
                    { img_path: 'img/targets/BOSS/downsized/8ball.jpg', stimulus_idx: 1, condition: 'consistent_schema'},
                    { img_path: 'img/targets/BOSS/downsized/8ball.jpg', stimulus_idx: 1, condition: 'consistent_schema'},
                    { img_path: 'img/targets/BOSS/downsized/8ball.jpg', stimulus_idx: 1, condition: 'consistent_schema'},
                ]
            }
            
            jsPsych.init({
                timeline: [session_procedure],                    
              
                on_finish: function(data) {
                    console.log('Over');
                    jsPsych.data.displayData('json');
                }       
            });
   
            // ///////////////////////////////////////////////////////////////////////////////////////////////
            //////////////////////////////////////////////////////////////////////////////////////////////////
        });
    
    </script>
</html>
